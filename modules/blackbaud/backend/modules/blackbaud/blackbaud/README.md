## Crowdbotics BLACKBAUD Module - Backend

This module provides access to data and domain-level capabilities within Blackbaud solutions, using a consistent RESTful experience and authorization mechanism. Blackbaud SKY enables your entire organization to be on one cloud software solution.


## Scope Features
The following are the key features in scope for this module.
1. Ability to authorize the code for access token.
2. Ability to retrieve the access token
3. Ability to retrieve the list of events, attachment list in event, participant list, event fees list.
4. Ability to retrieve the list of consent channels.
5. Ability to retrieve the list of constituents list, constituents appeal list, attachment list, address list, address list in constituents, constituent code list, custom field list, custom field list in constituent.
6. Ability to retrieve the list of education, list in constituent education, record list.


## BLACKBAUD Setup
In order to configure the module, the first thing you should do is to create an app on Blackbaud. Here's the steps detailing that process:
1. Sign up for a Blackbaud Developer account.
2. Go to settings, from My applications, select Add.
3. Provide the details about your application, including the name, details, organization name, publisher name, logo, and website. This information appears to Blackbaud customer admins when they connect your application, as well as to users during the authorization process.
4. Select Save. after this your "BLACKBAUD_CLIENT_ID" and "BLACKBAUD_CLIENT_SECRET" will appear.
5. To generate a subscription key, go to  "My subscriptions".
6. For each subscription if you have, you can select to generate your primary or secondary access key.
7. After that your "Bb-Api-Subscription-Key" will appear.


## Installation
1. In `.env` file add the following things:

```py
BLACKBAUD_CLIENT_ID=""
BLACKBAUD_CLIENT_SECRET=""
BLACKBAUD_REDIRECT_URL=""
BLACKBAUD_BASE_URL="https://api.sky.blackbaud.com"
BB_API_SUBSCRIPTION_KEY=""
```

2. Run the following commands to get started:

```
python manage.py migrate
python manage.py runserver
```

## Api Table
List of api's endpoints with params needed for these apis.

| Api Name                                                                                                           |                                                   Params                                                    | header                                     | Description                                                                                                                         |
|--------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------:|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| `{POST}``/modules/blackbaud/access/token/`                                                                         |                                        `token_payload: {"code":""}`                                         | `{"Authorization": "Bearer access_token"}` | This will return an object containing the `refresh_token` and `access_token`. All api calls will be made using this `access_token`. |
| `{GET}``/modules/blackbaud/consent/channels/`                                                                      |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return the channels details containing all its objects.                                                                   |                                                                                                                                      |
| `{GET}``/modules/blackbaud/constituents/list/`                                                                     |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an constituents list containing all its objects.                                                                   |
| `{GET}``/modules/blackbaud/events/list/ `                                                                          |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an event list containing all its objects.                                                                          |
| `{GET}``/modules/blackbaud/event/details/<event_id>/`                                                              |                                          `path_params: "event_id"`                                          | `{"Authorization": "Bearer access_token"}` | This will return an specific event details containing all its objects.                                                              |
| `{GET}``/modules/blackbaud/event/participants_list/<event_id>/ `                                                   |                                                 `event_id`                                                  | `{"Authorization": "Bearer access_token"}` | This will return an list of participants containing all its objects which are attendees of an event.                                |
| `{POST}``/modules/blackbaud/constituents/create_constituent/ `                                                     |                             `body_params: {"type": "", "email":"", "phone":""}`                             | `{"Authorization": "Bearer access_token"}` | This api will create constituent containing all its objects.                                                                        |
| `{POST}``/modules/blackbaud/constituents/convert_non_constituent_to_constituent/<non_constituent_id>/`             |                                     `path_params: "non_constituent_id"`                                     | `{"Authorization": "Bearer access_token"}` | This api is used to convert non constituent id to constituent                                                                       |
| `{GET}``/modules/blackbaud/constituents/constituent_details/<constituent_id>/`                                     |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an specific constituent details containing all its objects.                                                        |
| `{GET}``/modules/blackbaud/constituents/constituent_appeal_list/<constituent_id>/`                                 |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an list of appeal constituents containing all its objects.                                                         |
| `{POST}``/modules/blackbaud/constituents/create_attachment/`                                                       |                                `body_params: {"parent_id": "", "type": ""}`                                 | `{"Authorization": "Bearer access_token"}` | This api is used to create the constituent attachment.                                                                              |
| `{DELETE}``/modules/blackbaud/constituents/delete_attachment/<attachment_id>/`                                     |                                       `path_params: "attachment_id"`                                        | `{"Authorization": "Bearer access_token"}` | This will return deleted constituent attachment id.                                                                                 |
| `{GET}``/modules/blackbaud/constituents/constituent_attachment_list/<constituent_id>/`                             |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an constituent attachment list with details.                                                                       |
| `{POST}``/modules/blackbaud/constituents/create_constituent_code/`                                                 |                          `body_params: {"constituent_id": "", "description": ""}`                           | `{"Authorization": "Bearer access_token"}` | This api is used to create a constituent code.                                                                                      |
| `{DELETE}``/modules/blackbaud/constituents/delete_constituent_code/<constituent_code_id>/`                         |                                    `path_params: "constituent_code_id"`                                     | `{"Authorization": "Bearer access_token"}` | This will return deleted constituent code id.                                                                                       |
| `{GET}``/modules/blackbaud/constituents/get_constituent_code_details/<constituent_code_id>/`                       |                                    `path_params: "constituent_code_id"`                                     | `{"Authorization": "Bearer access_token"}` | This will return details about constituent code.                                                                                    |
| `{GET}``/modules/blackbaud/constituents/get_constituent_code_list/`                                                |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent code.                                                                                       |
| `{GET}``/modules/blackbaud/constituents/get_constituent_code_list_in_constituent/<constituent_id>/`                |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent code in constituent.                                                                        |
| `{POST}``/modules/blackbaud/constituents/create_constituent_custom_field/`                                         |                         `body_params: {"category": "", "comment": "", "parent_id"}`                         | `{"Authorization": "Bearer access_token"}` | This api is used to create the constituent custom field.                                                                            |
| `{GET}``/modules/blackbaud/constituents/get_constituent_custom_field_categories/`                                  |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent custom field categories.                                                                    |
| `{GET}``/modules/blackbaud/constituents/get_constituent_custom_field_categories_details/`                          |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent custom field categories details.                                                            |
| `{GET}``/modules/blackbaud/constituents/get_constituent_custom_field_categories_values/`                           |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an constituent custom field categories values.                                                                     |
| `{POST}``/modules/blackbaud/constituents/create_constituent_custom_field_collection/<constituent_id>/`             |                       `path_params: "constituent_id", body_params: {"category": ""}`                        | `{"Authorization": "Bearer access_token"}` | This will to create constituent custom field collection.                                                                            |
| `{GET}``/modules/blackbaud/constituents/get_constituent_custom_field_list/`                                        |                                                                                                             | `{"Authorization": "Bearer access_token"}` | This will return an list of onstituent custom field.                                                                                |
| `{GET}``/modules/blackbaud/constituents/get_constituent_custom_field_list_in_single_constituent/<constituent_id>/` |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return constituent custom field list in single constituents.                                                              |
| `{GET}``/modules/blackbaud/constituents/get_countries/`                                                            |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent countries.                                                                                  |
| `{GET}``/modules/blackbaud/constituents/get_currencyconfiguration/`                                                |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return about constituent currency configuration details.                                                                  |
| `{GET}``/modules/blackbaud/constituents/get_education_list/`                                                       |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an constituent education list with details.                                                                        |
| `{POST}``/modules/blackbaud/constituents/create_document/`                                                         |                          `body_params: {"file_name": "", "upload_thumbnail": ""}`                           | `{"Authorization": "Bearer access_token"}` | This will used to create a document.                                                                                                |
| `{POST}``/modules/blackbaud/constituents/create_education/`                                                        | `body_params: {"constituent_id": "", "school": "", "department": "", "degree": "", "status":"", "type":""}` | `{"Authorization": "Bearer access_token"}` | This will used to create constituent education.                                                                                     |
| `{DELETE}``/modules/blackbaud/constituents/delete_education/<education_id>/`                                       |                                        `path_params: "education_id"`                                        | `{"Authorization": "Bearer access_token"}` | This will used to delete onstituent education.                                                                                      |
| `{GET}``/modules/blackbaud/constituents/get_education_record/<education_id>/`                                      |                                        `path_params: "education_id"`                                        | `{"Authorization": "Bearer access_token"}` | This will return an details about constituent education record.                                                                     |
| `{POST}``/modules/blackbaud/constituents/create_education_custom_field/`                                           |                       `body_params: {"category": "", "parent_id": "", "comment": ""}`                       | `{"Authorization": "Bearer access_token"}` | This will used to create education custom field.                                                                                    |
| `{DELETE}``/modules/blackbaud/constituents/delete_education_custom_field/<custom_field_id>/`                       |                                      `path_params: "custom_field_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will used to delete the education custom field.                                                                                |
| `{GET}``/modules/blackbaud/constituents/get_education_custom_field_categories/`                                    |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return details about constituent education custom field categories.                                                       |
| `{GET}``modules/blackbaud/constituents/get_custom_field_list_in_education/<education_id>/`                         |                                        `path_params: "education_id"`                                        | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education custom field.                                                                     |
| `{GET}``/modules/blackbaud/constituents/get_education_degrees/`                                                    |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return details about constituent education degrees.                                                                       |
| `{GET}``/modules/blackbaud/constituents/get_education_list_in_constituent/<constituent_id>/`                       |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an constituent education list in constituents.                                                                     |
| `{GET}``/modules/blackbaud/constituents/get_education_schools/`                                                    |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education schools.                                                                          |
| `{GET}``/modules/blackbaud/constituents/get_education_statuses/`                                                   |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education statuses.                                                                         |
| `{GET}``/modules/blackbaud/constituents/get_education_subjects/`                                                   |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education subjects.                                                                         |
| `{GET}``/modules/blackbaud/constituents/get_education_types/`                                                      |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education types.                                                                            |
| `{POST}``/modules/blackbaud/constituents/get_address_list/`                                                        |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of constituent education address list.                                                                     |
| `{POST}``/modules/blackbaud/constituents/create_address/`                                                          | `body_params: {"constituent_id": "", "country": "", "city": "", "type":"", "postal_code":"", "region":""}`  | `{"Authorization": "Bearer access_token"}` | This will create constituent education address.                                                                                     |
| `{GET}``/modules/blackbaud/constituents/get_address_details/<address_id>/ `                                        |                                         `path_params: "address_id"`                                         | `{"Authorization": "Bearer access_token"}` | This will return an details about constituent address.                                                                              |
| `{DELETE}``/modules/blackbaud/constituents/delete_address_details/<address_id>/`                                   |                                         `path_params: "address_id"`                                         | `{"Authorization": "Bearer access_token"}` | This will used to delete the address details.                                                                                       |
| `{GET}``/modules/blackbaud/constituents/get_address_list_in_constituents/<constituent_id>/`                        |                                       `path_params: "constituent_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return an list of address in constituent.                                                                                 |
| `{GET}``/modules/blackbaud/constituents/get_address_types/`                                                        |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will return an list of address type in constituent.                                                                            |
| `{POST}``/modules/blackbaud/constituents/create_aliases/`                                                          |                        `body_params: {"constituent_id": "", "name": "", "type":""}`                         | `{"Authorization": "Bearer access_token"}` | This will to create constituent aliases.                                                                                            |
| `{DELETE}``/modules/blackbaud/constituents/delete_aliases/<alias_id>/`                                             |                                          `path_params: "alias_id"`                                          | `{"Authorization": "Bearer access_token"}` | This will delete constituent alias.                                                                                                 |
| `{POST}``/modules/blackbaud/constituents/create_alias_collection/<constituent_id>/`                                |                    `path_params: "constituent_id", body_params: {"name": "", "type":""}`                    | `{"Authorization": "Bearer access_token"}` | This will used to create constituent alias collection.                                                                              |
| `{GET}``/modules/blackbaud/event/get_participant/<participant_id>/`                                                |                                       `path_params: "participant_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will used to get the event participant details.                                                                                |
| `{GET}``/modules/blackbaud/event/get_event_attachment/`                                                            |                            `query_params: {"event_id": "", ""attachment_id":""}`                            | `{"Authorization": "Bearer access_token"}` | This will used to get event attachment.                                                                                             |
| `{GET}``/modules/blackbaud/event/get_event_attachment_tags/`                                                       |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will used to get event attachment tags.                                                                                        |
| `{GET}``/modules/blackbaud/event/<event_id>/get_event_attachment_list/`                                            |                          `path_params: "event_id", query_params: "attachment_tag"`                          | `{"Authorization": "Bearer access_token"}` | This will used to get event attachment list.                                                                                        |
| `{GET}``/modules/blackbaud/event/get_event_categories/`                                                            |                                     `query_params: "include_inactive"`                                      | `{"Authorization": "Bearer access_token"}` | This will used to get event categories.                                                                                             |
| `{GET}``/modules/blackbaud/event/<event_id>/get_event_fees/`                                                       |                                          `path_params: "event_id"`                                          | `{"Authorization": "Bearer access_token"}` | This will return an list of fees in event.                                                                                          |
| `{GET}``/modules/blackbaud/event/<event_id>/get_event_participant_options/`                                        |                                          `path_params: "event_id"`                                          | `{"Authorization": "Bearer access_token"}` | This will used to get the event participant options.                                                                                |
| `{GET}``/modules/blackbaud/event/<participant_id>/get_event_participant_donation/`                                 |                                       `path_params: "participant_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will used to get event participant donations.                                                                                  |
| `{GET}``/modules/blackbaud/event/<participant_id>/get_event_participant_fee_payments/ `                            |                                       `path_params: "participant_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will used to get event participant fee payments.                                                                               |
| `{GET}``/modules/blackbaud/event/<participant_id>/get_event_participant_fees/`                                     |                                       `path_params: "participant_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will used to get event participant fees details.                                                                               |
| `{GET}``/modules/blackbaud/event/<participant_id>/get_participant_options/`                                        |                                       `path_params: "participant_id"`                                       | `{"Authorization": "Bearer access_token"}` | This will return details of participant options.                                                                                    |
| `{GET}``/modules/blackbaud/event/get_participant_levels/`                                                          |                                                      -                                                      | `{"Authorization": "Bearer access_token"}` | This will used to get the participant level details.                                                                                |
| `{DELETE}``/modules/blackbaud/event/delete_event_participant/<participant_id>/`                                    |                                          `path_params: "participant_id"`                                          | `{"Authorization": "Bearer access_token"}` | This will used to delete event participant.                                                                                         |

## Contributing
Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.
Please make sure to update tests as appropriate.

## License
[MIT](https://choosealicense.com/licenses/mit/)