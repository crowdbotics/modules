# WalletConnect

## Configs

# Run the following commands in the root directory as per the given sequence in order to integrate Web3 support for the module:
```
npm i --save react-native-crypto
```
```
npm i --save react-native-randombytes
```
```
npx react-native link react-native-randombytes
```
```
npm i --save-dev rn-nodeify@latest
```
```
npx rn-nodeify --install "stream" --hack
```
```
./node_modules/.bin/rn-nodeify --hack --install
```
# Import the  following in the index.js in root directory

import './shim.js'
import crypto from 'crypto'

# The following dependencies are used for the module

```
npm install @walletconnect/react-native-dapp
```
```
npm install react-native-svg @react-native-async-storage/async-storage
```

# Configuration for react-native-camera
Add permissions to your app android/app/src/main/AndroidManifest.xml file:
```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE"/>

```
Insert the following lines in android/app/build.gradle:
```
android {
  ...
  defaultConfig {
    ...
    missingDimensionStrategy 'react-native-camera', 'general' // <--- insert this line
  }
}
```

## Getting started
# Run the following command as per the enlisted sequence:

1. Android command
```
npm run android
```
2. run hack install command
```
./node_modules/.bin/rn-nodeify --hack --install
```
3. run start command
```
npm run start
```
## Features

# Connect to Crypto Wallets

useWalletConnect hook and WalletConnectProvider from @walletconnect/web3-provider package are used to allow users to connect to a wallet of their choosing.
The following piece of code allows to connect to wallet
```
const connector = useWalletConnect();
connector.connect()
```
# Kill Session

Users can kill the session which would direct them to the Home screen, where they could connect with another wallet 
The following piece of code allows to Kill the session.
```
connector.killSession()
```
# Switch Session

Users can also switch session, thereby switching from one crypto wallet to another.

# Send Funds

Users can send funds from the connected amount to another account. To this end, Web3 Apis were made use of. The user has to scan a QR code generated by the receivers's crypto wallet in order to get his/her account id. 
The following code enables the user to send funds 
```
  const tx = {
      from: ...,
      to: ...,
      gas: ...,
      value: ...,
    }
    web.eth.sendTransaction(tx)
```

# Receive Funds

Users generate a QR code which contains their account id. The sender needs the QR code to acquire the account id in order to for him to send the funds

 # Transaction History

 A log of transactions is maintained all along.
 

 # RPC

 WalletConnectProvider object has to be configured in order to make successful request to the crypto wallets for importing account details. For this this purpose, RPC protocol needs to be configured for WalletConnectProvider to allow request to crypto wallets.
The following depicts the configuration
 ```
 new WalletConnectProvider({
    rpc: {
      97: 'https://data-seed-prebsc-1-s1.binance.org:8545/', 
      43113: 'https://api.avax-test.network/ext/bc/C/rpc',
      3: 'https://ropsten.infura.io/v3/9ba7553f08b34a0f850ba9ce848ab465',
    },
 
 ```
