# PayPal
By using this module, users will be able to handle payment transactions using paypal services.

## Scopes Features
The following are the critical features in scope for this module.

1. Generate Access Token
2. Create and show orders and make authorization payments for orders
3. Show, reauthorize, capture authorized payments and refund capture payments and show refund details 
4. Generate, show and list Invoices
5. Create, show, update, suspend, active and cancel the subscriptions 
6. Create, show, list, deactivate and activate the plans

## Keys And Credientials Setup
You can get environment variable keys by the following steps:
1. Create a [developer account](https://www.paypal.com/signin/client?flow=provisionUser&country.x=US&locale.x=en_US) on Paypal and put your  information in it.
2. After Signup in paypal your dashboard will appear. Click on Apps & Credentials.
3. Then click on Create App.
4. Enter your App name and click on Create app button.
5. When your app is created. Your sandbox account, client id and client secret will appear.
6. Copy your sandbox account, client id,client secret and base URL and save them for later use. 
7. Come back to your dashboard and click on Testing Tools and then on the sandbox account.
8. After these above steps you must have your two accounts one is business and the other one personal. These accounts are valid,  you can use them as both business or personal. 

## Environment variables

```
PAYPAL_BASE_URL = ""
PAYPAL_CLIENT_ID = ""
PAYPAL_CLIENT_SECRETS = ""
```

## Setup Installation

Start the server by running the following command :
```
python manage.py migrate
python manage.py runserver
```

## Api Table
List of api's endpoints with params needed for these apis.

| Api Name                                                                       |                Param                 | Description                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------|:------------------------------------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `paypal/service/create-web-hook/`                                              |             request.body             | Creates an order Required the request body. For details about request body visit the given link.  https://developer.paypal.com/docs/api/orders/v2/#orders_create                                                                                                                                                                                                                      |
| `paypal/service/{order_id}/get_order_details/`                                 |            url `order_id`            | Shows details for an order, by ID.                                                                                                                                                                                                                                                                                                                                                    |
| `paypal/service/{order_id}/authorize-payment-for-order/`                       |            url `order_id`            | Authorizes payment for an order. To successfully authorize payment for an order, the buyer must first approve the order                                                                                                                                                                                                                                                               |
| `paypal/service/{order_id}/capture-payment-for-order/`                         |            url `order_id`            | Captures payment for an order. To successfully capture payment for an order, the buyer must first approve the order.                                                                                                                                                                                                                                                                  |
| `paypal/service/{authorization_id}/get-authorized-payment/`                    |        url `authorization_id`        | Shows details for an authorized payment, by ID                                                                                                                                                                                                                                                                                                                                        |
| `paypal/service/{authorization_id}/capture-authorized-payment/`                | url `authorization_id`, request.body | Captures an authorized payment, by ID.  The API also required Capture details in request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/payments/v2/#authorizations_capture                                                                                                                                                         |
| `paypal/service/{capture_id}/get-captured-payment/`                            |           url `capture_id`           | Shows details for a captured payment, by ID.                                                                                                                                                                                                                                                                                                                                          |
| `paypal/service/{capture_id}/refund-capture-payment/`                          |    url `capture_id`, request.body    | Refunds a captured payment, by ID. For a full refund, include an empty payload in the JSON request body. For a partial refund, include an amount object in the JSON request body.For more details about request body visit the given link . https://developer.paypal.com/docs/api/payments/v2/#captures_refund                                                                        |
| `paypal/service/{refund_id}/get-refund-details/`                               |           url `refund_id`            | Shows details for a refund, by ID.                                                                                                                                                                                                                                                                                                                                                    |
| `paypal/service/create-product/`                                               |             request.body             | Creates a product Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/catalog-products/v1/#products_create                                                                                                                                                                                                          |
| `paypal/service/{product_id}/get-product-details/`                             |           url `product_id`           | Shows details for a product, by ID                                                                                                                                                                                                                                                                                                                                                    |
| `paypal/service/create-plan/`                                                  |             request.body             | Creates a plan that defines pricing and billing cycle details for subscriptions. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/subscriptions/v1/#plans_create                                                                                                                                                 |
| `paypal/service/{plan_id}/get-plan-details/`                                   |            url `plan_id`             | Shows details for a plan, by ID.                                                                                                                                                                                                                                                                                                                                                      |
| `paypal/service/{plan_id}/deactivate-plan/`                                    |            url `plan_id`             | Deactivates a plan, by ID.                                                                                                                                                                                                                                                                                                                                                            |
| `paypal/service/{plan_id}/activate-plan/`                                      |            url `plan_id`             | Activates a plan, by ID.                                                                                                                                                                                                                                                                                                                                                              |
| `paypal/service/create-subscription/`                                          |             request.body             | Creates a subscription. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/subscriptions/v1/#subscriptions_create                                                                                                                                                                                                  |
| `paypal/service/{subscription_id}/get-refund-details/`                         |        url `subscription_id`         | Shows details for a subscription, by ID.                                                                                                                                                                                                                                                                                                                                              |
| `paypal/service/{subscription_id}/suspend-subscription/`                       |        url `subscription_id`         | Suspends the subscription.                                                                                                                                                                                                                                                                                                                                                            |
| `paypal/service/{subscription_id}/activate-subscription/`                      |        url `subscription_id`         | Activates the subscription.                                                                                                                                                                                                                                                                                                                                                           |
| `paypal/service/{subscription_id}/cancel-subscription/`                        |        url `subscription_id`         | Cancels the subscription. To cancel the subscription you must suspend it first                                                                                                                                                                                                                                                                                                        |
| `paypal/service/{subscription_id}/capture-authorized-payment-on-subscription/` | url `subscription_id` , request.body | Captures an authorized payment from the subscriber on the subscription. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/subscriptions/v1/#subscriptions_capture                                                                                                                                                 |
| `paypal/service/generate-invoice-number/`                                      |                 None                 | Generates the next invoice number that is available to the merchant                                                                                                                                                                                                                                                                                                                   |
| `paypal/service/create-draft-invoice/`                                         |             request.body             | Creates a draft invoice. To move the invoice from a draft to payable state, you must send the invoice Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/invoicing/v2/#invoices_create                                                                                                                             |
| `paypal/service/{invoice_id}/get-invoice-details/`                             |           url `invoice_id`           | Shows details for an invoice, by ID.                                                                                                                                                                                                                                                                                                                                                  |
| `paypal/service/{invoice_id}/send-invoice/`                                    |           url `invoice_id`           | Sends or schedules an invoice, by ID, to be sent to a customer. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/invoicing/v2/#invoices_send                                                                                                                                                                     |
| `paypal/service/list-disputes/`                                                |                 None                 | Lists disputes with a summary set of details, which shows the dispute_id, reason, status, dispute_state, dispute_life_cycle_stage, dispute_channel, dispute_amount, create_time and update_time fields                                                                                                                                                                                |
| `paypal/service/{dispute_id}/get-dispute-details/`                             |           url `dispute_id`           | Shows details for a dispute, by ID.                                                                                                                                                                                                                                                                                                                                                   |
| `paypal/service/{dispute_id}/accept-claim/`                                    |   url `dispute_id`,   request.body   | Accepts liability for a claim, by ID. When you accept liability for a claim, the dispute closes in the customer’s favor and PayPal automatically refunds money to the customer from the merchant's account. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/customer-disputes/v1/#disputes-actions_accept-claim |
| `paypal/service/create-web-hook/`                                              |             request.body             | Subscribes your webhook listener to events. Required the request body. For details about request body visit the given link  https://developer.paypal.com/docs/api/webhooks/v1/#webhooks_post                                                                                                                                                                                          |

## Postman Collection Of Paypal APIs
Here is a collection of all the api endpoints for the paypal module.
[Paypal-Apis Postman Collection](https://drive.google.com/file/d/1L5Y9Z56f57Ubocz_hI78GFIGK981tABp/view?usp=share_link)

## Module Specifications
Here is the [Module Specification Document](https://docs.google.com/document/d/1OMUhgHQm7NlkEa-YREjCy9GEj9807rVaV6MRyp4j-mc/edit?usp=sharing), which provides more information about the module's actual intentions.
## Contributing
Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.
Please make sure to update tests as appropriate.
## License
[MIT](https://choosealicense.com/licenses/mit/)